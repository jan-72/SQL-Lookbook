delimiter $$$
create procedure primecalc (r int)
begin
declare i int;
declare n int;
declare is_prime int;
declare primes mediumtext default '2';
set n=3;
outer_loop: while n<=r do
    set i=2;
    set is_prime=true;
    inner_loop: while i<=floor(n/2) do
        if n%i=0 then set is_prime=false;
        leave inner_loop;
        end if;
        set i=i+1;
        end while inner_loop;
        if is_prime=true then set primes = concat(primes,"&",n);
        end if;
    set n=n+1;
end while outer_loop;
select primes;
end $$$

call primecalc(1000);
